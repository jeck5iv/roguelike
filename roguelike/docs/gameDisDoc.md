# Game Design Document — Roguelike

## 1. Введение

Roguelike — консольная игра с элементами процедурной генерации, пошаговыми боями, высокой сложностью и вариативностью. Игрок управляет героем, исследующим опасные подземелья, выполняя квесты, сражаясь с врагами и используя предметы. Цель — выжить, завершить квесты и дойти до финала, каждый раз в новых условиях.

---

## 2. Игровой цикл

Каждый игровой ход состоит из:

1. Ввода команды от игрока.
2. Выполнения действия (перемещение, бой, взаимодействие).
3. Хода противников (ИИ мобов).
4. Обновления состояния мира.
5. Отрисовки нового состояния.

Игровой цикл повторяется до победы или гибели игрока.

---

## 3. Игровой мир

### 3.1 Карта

* Представлена в виде сетки (тайлы).
* Генерируется случайно или загружается из файла.
* Содержит: стены, пол, предметы, сущности, триггеры.

Типы тайлов:

* `.` — проходимый
* `#` — стена
* `@` — игрок
* `M` — моб
* `*` — предмет

### 3.2 Объекты

* **Существа**: игрок, мобы
* **Предметы**: оружие, броня, артефакты
* **Квестовые элементы**: цели, триггеры

---

## 4. Игровые механики

### 4.1 Перемещение

* Управление с клавиатуры (WASD).
* Движение на 1 клетку в выбранном направлении.
* Нельзя пройти сквозь стены или занятые клетки.

### 4.2 Боевая система

* При попытке занять клетку моба происходит атака.
* Урон зависит от характеристик атакующего и защитника.
* Смерть при снижении HP до 0.

### 4.3 Инвентарь и предметы

* У игрока есть инвентарь и экипировка.
* Предметы повышают характеристики (атака, защита и т.д.).
* Инвентарь ограничен.
* Экипировку можно надевать и снимать.

### 4.4 Квесты

* Побочные квесты генерируются при старте.
* Основной квест — победа или достижение цели.
* Цели: убить всех мобов, найти артефакт и т.д.
* Награды: улучшение характеристик, новые предметы.

---

## 5. Противники (ИИ)

### Типы поведения:

| Стратегия   | Поведение                               |
| ----------- | --------------------------------------- |
| Агрессивный | Идет к игроку и атакует при приближении |
| Пассивный   | Стоит на месте                          |
| Трусливый   | Убегает от игрока, если находится рядом |

### Состояния моба:

* **Нормальное** — действует по стратегии.
* **Паника** — переключается на бегство при низком HP.

---

## 6. Прогрессия

* Игрок получает опыт за убийство мобов.
* При достижении нужного количества — уровень повышается.
* Характеристики увеличиваются, открываются новые возможности.

---

## 7. Интерфейс

* Консольная отрисовка карты (`.` `#` `@` `M`).
* Отображение состояния игрока: HP, координаты, экипировка.
* Сообщения о событиях: атака, получение урона, смерть, лут.

---

## 8. Сложность и реиграбельность

* Случайная генерация карты и заданий.
* Смерть — окончательная (перманентная).
* Повторное прохождение даёт иной опыт.
* Можно настроить сложность (кол-во мобов, мощность, размер карты).

---

## 9. Расширения (Planned Features)

| Возможность       | Приоритет | Описание                               |
| ----------------- | --------- | -------------------------------------- |
| Главное меню        | Высокий   | Возможность настройки игры прямо на стартовом экране |
| Магия             | Средний   | Заклинания с расходом маны             |
| Торговля          | Низкий    | NPC-продавцы, экономика                |
| Система умений    | Средний   | Активные навыки, прокачка              |
| Классы персонажей | Высокий   | Воин, маг, вор и т.д.                  |
| Сохранения        | Средний   | Возможность сохранения и загрузки игры |

---

## 10. Пример прохождения (Use Case)

1. Игрок запускает игру, выбирает новый уровень.
2. Отрисовывается случайная карта.
3. Игрок видит стартовую позицию и вводит `W`.
4. Игрок перемещается, находит предмет.
5. Подбирает и экипирует его.
6. Сталкивается с мобом, вступает в бой.
7. Убивает моба, получает опыт.
8. Завершает квест, достигает цели, побеждает.

---

## 11. Тестирование

| Тест                          | Метод                                      |
| ----------------------------- | ------------------------------------------ |
| Проверка генерации карты      | Автоматический тест генератора             |
| Перемещение по границам карты | Юнит-тест, проверка выхода за пределы      |
| Бой с мобом                   | Интеграционный тест: HP, смерть, поведение |
| Надевание предметов и эффект  | Проверка изменений характеристик           |
| Завершение квеста             | Проверка условия и награды                 |
| Разные стратегии мобов        | Тест с симуляцией поведения                |

---

## 12. Сводка

Документ описывает весь игровой дизайн системы Roguelike: игровой цикл, объекты, механики, ИИ, квесты и интерфейс. Он направлен на достижение реиграбельности, гибкости и чистоты архитектуры без лишней сложности. Предусмотрена возможность масштабирования и расширения функциональности в следующих итерациях.

